# Importation des bibliothèques nécessaires
# import pandas as pd
# import dash
# from dash import dcc
# from dash import html
# import matplotlib.pyplot as plt

# Lecture du fichier CSV
# df = pd.read_csv('/home/ec2-user/Projet_Youbac_Linux/prix_a_recup.csv', names = ['date', 's_prix'])

# Création de l'application Dash
# app = dash.Dash()


# Définition de la mise en page de l'application
# app.layout = html.Div(className='Youbac', children=[
                         # html.H2(id= 'last_prix',children= 'Dernier prix de la crypto bnb : {}'.format(df['s_prix'].iloc[-1])),
			 # html.H2(id= 'temps', children= 'à la date : {}'.format(df['date'].iloc[-1]))
#])


# Lancement de l'application
# if __name__ == '__main__':
   # app.run_server(host= "0.0.0.0", port= 8050, debug=True)

import pandas as pd
import dash
from dash import html
from dash import dcc
import plotly.express as px

# Lecture du fichier CSV contenant les données
df = pd.read_csv('/home/ec2-user/Projet_Youbac_Linux/prix_a_recup.csv', names=['date', 's_prix'])

# Calcul de la volatilité et de la moyenne des prix
volatility = df['s_prix'].std()
average = df['s_prix'].mean()

# Création de l'application Dash
app = dash.Dash(__name__)

# Définition de la feuille de style
app.css.append_css({'external_url': 'https://codepen.io/chriddyp/pen/dZVMbK.css'})

# Définition de la mise en page
app.layout = html.Div(className='Youbac',
		      style={
        'backgroundColor': '#000000',
        'color': '#FFFFFF'
    },
		     children=[
    html.H1('DashBoard BNB'),
    html.Div(className='row', children=[
        html.Div(className='six columns', children=[
            dcc.Graph(
                id='time-series',
                figure=px.line(df, x='date', y='s_prix', title='Série temporelle du prix de BNB')
            )
        ]),
        html.Div(className='six columns', children=[
            html.Table([
                html.Tr([html.Th('Statistiques des prix')]),
                html.Tr([html.Td('Volatilité :'), html.Td('{:.2f}'.format(volatility))]),
                html.Tr([html.Td('Moyenne :'), html.Td('{:.2f}'.format(average))])
            ])
        ])
    ])
])

if __name__ == '__main__':
    app.run_server(host= "0.0.0.0", port= 8050, debug=True)

